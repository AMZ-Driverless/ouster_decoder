<launch>

    <arg name="debug" default="false"/>
    <env if="$(arg debug)" name="ROSCONSOLE_CONFIG_FILE" value="$(find ouster_decoder)/launch/debug.conf"/>

    <arg name="lidar_ns" default="os"/>
    <arg name="driver_ns" default="/os_node"/>
    <!-- Gravity at philadelphia from https://www.ngs.noaa.gov/cgi-bin/grav_pdx.prl -->
    <!-- Lat: 39.9526 N, Lon: 75.1652 W, MSL Height: 11.8872, Predicted gravity:  980184 +/- 2 milligals -->
    <arg name="gravity" default="9.80184"/>

    <arg name="lidar_frame" default="os_lidar"/>
    <arg name="imu_frame" default="os_imu"/>

    <node pkg="ouster_decoder" name="os_decoder" type="ouster_decoder_node" output="screen" ns="$(arg lidar_ns)">
        <!-- params -->
        <param name="gravity" type="double" value="$(arg gravity)"/>
        <param name="lidar_frame" type="string" value="$(arg lidar_frame)"/>
        <param name="imu_frame" type="string" value="$(arg imu_frame)"/>

        <!-- input topics -->
        <remap from="~os_config" to="$(arg driver_ns)/os_config"/>
        <remap from="~lidar_packets" to="$(arg driver_ns)/lidar_packets"/>
        <remap from="~imu_packets" to="$(arg driver_ns)/imu_packets"/>

        <!-- output topics -->
        <remap from="~image" to="image"/>
        <remap from="~camera_info" to="camera_info"/>
        <remap from="~cloud" to="cloud"/>
        <remap from="~imu" to="imu"/>
    </node>
</launch>